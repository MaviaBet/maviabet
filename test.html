<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conectar a MetaMask</title>
    <script src="https://cdn.jsdelivr.net/npm/@walletconnect/client/dist/WalletConnect.min.js"></script>
    <style>
        #status {
            margin-top: 20px;
            font-size: 18px;
            color: green;
        }
    </style>
</head>
<body>
    <h1>Conectar a MetaMask</h1>
    <button id="connectMetaMask">Conectar MetaMask</button>
    <div id="status">Estado de conexi贸n: No conectado</div>

    <script>
        const connector = new WalletConnect({
            bridge: "https://bridge.walletconnect.org",
        });

        document.getElementById("connectMetaMask").onclick = async () => {
            if (!connector.connected) {
                await connector.createSession();
            }

            const uri = connector.uri;
            window.open(uri, '_self');
        };

        // Escuchar eventos de conexi贸n
        connector.on("connect", (error, payload) => {
            if (error) {
                updateStatus("Error de conexi贸n: " + error.message);
                return;
            }
            const { accounts } = payload.params[0];
            updateStatus("Conectado: " + accounts[0]);
        });

        const updateStatus = (message) => {
            document.getElementById("status").innerText = "Estado de conexi贸n: " + message;
        };
    </script>
</body>
</html>
